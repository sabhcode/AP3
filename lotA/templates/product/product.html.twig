{% extends 'base.html.twig' %}

{% block title %}{{ product.getName }}{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/product.css') }}">
{% endblock %}

{% block body %}
    <section class="content">
        <div class="product">
            <div class="product-image">
                <img src="/media/images/product/{{ product.getUuid() }}/{{ product.getImage() }}" alt="Image du produit">
            </div>
            <div class="product-details">
                <h2>{{ product.getName() }}</h2>
                <p class="product_card-price">{{ cart.formatPrice(product.getUnitPrice()) }}</p>
                <p class="product_card-description">{{ product.getDescription() }}</p>
                <button class="update-product-cart" data-productUuid="{{ product.getUuid() }}" data-action="add">ðŸ›’</button>
            </div>
        </div>
        <div class="stock-info">
            <h3>Nos magasins avec ce produit en stock</h3>
            <ul>
                {% for stock in product.getStocks() %}
                    {% if stock.getQuantity() > 10 %}
                        <li><span class="stock-location">{{ stock.getStore().getCity() }}</span> : En stock</li>
                    {% else %}
                        <li><span class="stock-location">{{ stock.getStore().getCity() }}</span> : {{ stock.getQuantity() }} unit.</li>
                    {% endif %}
                {% else %}
                    <p>Produit en rupture de stock</p>
                {% endfor %}
            </ul>
        </div>
        <div class="products-suggestions">
            <h3>Des produits qui pourraient vous intÃ©resser</h3>
            <div class="product_cards">
                {% for productOfSameCategory in product.getCategory().getProducts() %} 
                    {% if productOfSameCategory.getUuid() != product.getUuid() %}      
                        <div class="product_card">
                            <img class="product_card-image" src="/media/images/product/{{ productOfSameCategory.getUuid() }}/{{ productOfSameCategory.getImage() }}">
                            <p class="product_card-name">{{ productOfSameCategory.getName() }}</p>
                            <p class="product_card-price">{{ cart.formatPrice(productOfSameCategory.getUnitPrice()) }}</p>
                            <div class="product_card-buttons">
                                <a href="{{ path('app_product', {'slug': productOfSameCategory.getSlug()}) }}">ðŸ‘€</a>
                                <button class="update-product-cart" data-productUuid="{{ product.getUuid() }}" data-action="add">ðŸ›’</button>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </section>
{% endblock %}
