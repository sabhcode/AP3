{% extends 'base.html.twig' %}

{% block title %}{{ product.getName }}{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/product.css') }}">
{% endblock %}

{% block body %}
    <section class="content">
        <div class="product">
            <div class="product-image">
                <img src="/media/images/product/{{ product.getUuid() }}/{{ product.getImage() }}" alt="Image du produit">
            </div>
            <div class="product-details">
                <h2>{{ product.getName() }}</h2>
                <p><strong>{{ product.getPrice() }} ðŸ’²</strong></p>
                <p><strong>{{ product.getDescription() }}</strong></p>
                <button class="update-product-cart" data-productUuid="{{ product.getUuid() }}" data-action="add">ðŸ›’</button>
            </div>
        </div>
        <div class="stock-info">
            <h3>Lieux et quantitÃ©s de stockage :</h3>
            <ul>
                {% if product.getStocks() is not empty %}
                    {% for stock in product.getStocks() %}
                        <li><span class="stock-location">{{ stock.getStore().getCity() }}</span> : {{ stock.getQuantity() }} unit.</li>
                    {% endfor %}
                {% else %}
                    <p>Produit en rupture de stock</p>
                {% endif %}
            </ul>
        </div>
        <div class="products-suggestions">
            <h3>Des produits qui pourraient vous intÃ©resser</h3>
            <div class="bottom-product-cards">
                {% for productOfSameCategory in product.getCategory().getProducts %}      
                    {% if (productOfSameCategory.getUuid) != product.getUuid %}      
                        <div class="bottom-card">
                            <img src="/media/images/product/{{ productOfSameCategory.getUuid() }}/{{ productOfSameCategory.getImage() }}" alt="Produit 1">
                            <h3>{{ productOfSameCategory.getName }}</h3>
                            <p class="bottom-product-price">{{ productOfSameCategory.getPrice }} ðŸ’²</p>
                            <div class="bottom-buttons-card">
                                <a href="{{ path('app_product', {'slug': productOfSameCategory.getSlug()}) }}">ðŸ‘€</a>
                                <button class="update-product-cart" data-productUuid="{{ product.getUuid() }}" data-action="add">ðŸ›’</button>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </section>
{% endblock %}
