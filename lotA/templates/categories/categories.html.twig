{% extends 'base.html.twig' %}

{% block title %}Catalogue{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ asset('css/categories.css') }}">
{% endblock %}

{% block body %}
	<h1>Catalogue</h1>
	<!-- Barre de recherche -->
	<div class="search-bar">
		<input type="text" id="search-input" placeholder="Rechercher un produit">
		<select id="category-filter">
			<option class="select-category" value="">Toutes catégories</option>
			<!-- Boucle pour afficher les options de catégorie -->
			{% for category in categories %}
				<option value="{{ category.getName() }}">{{ category.getName() }}</option>
			{% endfor %}
		</select>
		<button id="search-button">🔍</button>
	</div>
	<div class="categories">
		<!-- Boucle pour afficher les catégories -->
		{% for category in categories %}
			<div class="category">
				<div class="category-name">
					<a href="{{ path('app_category', {'slug': category.getSlug()}) }}">{{ category.getName()|upper }} 🔗</a>
				</div>
				<div class="product_cards">
					<!-- Boucle pour afficher les produits de chaque catégorie -->
					{% for product in category.getProducts() %}
						<div class="product_card">
							<img class="product_card-image" src="{{ asset('media/images/product/' ~ product.getUuid() ~ '/' ~ product.getImage()) }}" alt="Image du produit">
							<p class="product_card-name">{{ product.getName() }}</p>
							<p class="product_card-price">{{ cart.formatPrice(product.getUnitPrice()) }}</p>
							<div class="product_card-buttons">
								<a href="{{ path('app_product', {'slug': product.getSlug()}) }}">👀</a>
								<button class="update-product-cart" data-productuuid="{{ product.getUuid() }}" data-action="add">🛒</button>
							</div>
						</div>
					{% endfor %}
				</div>
			</div>
		{% endfor %}
	</div>
{% endblock %}
