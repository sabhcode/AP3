{% extends 'base.html.twig' %}

{% block title %}Mon Profil{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ asset('css/profil.css') }}">
{% endblock %}

{% block header %}
    {% include 'client/headerLinks.html.twig' %}
{% endblock %}

{% block body %}
	<div class="app_container app_padding">
		<h1>Mon profil</h1>
		<div class="box_container">
			<div class="user-info">
				<h3 class="box_title"><span>Bonjour,</span> {{ app.user.getFirstName() }} {{ app.user.getName() }}</h3>
				<p>
					<span>Email :</span> {{ app.user.getEmail() }}
				</p>
				<p>
					<span>Téléphone :</span> {{ app.user.getPhone() ?? "À compléter" }}
				</p>
				<p>
					<span>Adresse :</span> {{ app.user.getAddress() ?? "À compléter" }}
				</p>
			</div>
			<div>
				<h3 class="box_title">Vos commandes</h3>
				{% if app.user.getOrders() is not empty %}
					<div class="flex">
						{% for order in app.user.getOrders() %}
							<a class="order_card" href="{{ path('app_client_my_order', {'id': order.getId() }) }}">
								<p>Commande num. {{ order.getId() }}</p>
								<p><span>Passée le :</span> {{ order.getDateTime()|format_date(locale="fr", pattern="EEEE d MMMM y 'à' HH:mm") }}</p>
								<p><span>{{ order.getProductQuantity() }}</span> articles</p>
								<p><span>Prix TTC :</span> {{ (order.getTotalPriceHT() + (order.getTotalPriceHT() * order.getTax() / 100))|format_currency('EUR') }}</p>
							</a>
						{% endfor %}
					</div>
				{% else %}
					<p>Vous n'avez pas encore passé de commande sur notre site</p>
				{% endif %}
			</div>
			<div>
				<a class="logout-button" href="{{ path('app_logout') }}">Déconnexion</a>
			</div>
		</div>
	</div>

	
{% endblock %}
