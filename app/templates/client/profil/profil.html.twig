{% extends 'base.html.twig' %}

{% block title %}Mon Profil{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ asset('css/profil.css') }}">
{% endblock %}

{% block header %}
    {% include 'client/headerLinks.html.twig' %}
{% endblock %}

{% block body %}
	<div class="app_container app_padding">
		<h1>Mon profil</h1>
		<a href="{{ path('app_logout') }}">Déconnexion</a>
		<div class="box_container">
			<div>
				<h3 class="box_title">Bonjour, {{ app.user.getFirstName() }} {{ app.user.getName() }}</h3>
				<p>Email : {{ app.user.getEmail() }}</p>
				<p>Téléphone : {{ app.user.getPhone() }}</p>
				<p>Adresse : {{ app.user.getStreet() }}, {{app.user.getZipCode() }} {{app.user.getCity() }}</p>
			</div>
			<div>
				<h3 class="box_title">Vos commandes</h3>
				{% if app.user.getOrders() is not empty %}
					<div class="flex">
						{% for order in app.user.getOrders() %}
							<a class="order_card" href="{{ path('app_client_my_order', {'id': order.getId() }) }}">
								<p>Commande num. {{ order.getId() }}</p>
								<p>Passée le {{ order.getDateTime()|format_date(locale="fr", pattern="EEEE d MMMM y 'à' HH:mm") }}</p>
								<p>{{ order.getProductQuantity() }} articles</p>
								<p>Prix TTC {{ cart.formatPrice(order.getTotalPriceHT() + (order.getTotalPriceHT() * order.getTax() / 100)) }}</p>
							</a>
						{% endfor %}
					</div>
				{% else %}
					<p>Vous n'avez pas encore passé de commande sur notre site</p>
				{% endif %}
			</div>
		</div>
	</div>
{% endblock %}
