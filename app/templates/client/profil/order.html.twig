{% extends 'base.html.twig' %}

{% block title %}Commande num. {{ order.getId() }}{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ asset('css/cart.css') }}">
	<link rel="stylesheet" href="{{ asset('css/profil.css') }}">
    <link rel="stylesheet" href="{{ asset('css/order.css') }}">
{% endblock %}

{% block header %}
    {% include 'client/headerLinks.html.twig' %}
{% endblock %}

{% block body %}
    <h1>Commande num. {{ order.getId() }}</h1>
	<div class="app_container app_padding">
        <div class="order-info">
            <p><span>{{ order.getProductQuantity() }}</span> articles</p>
            {% if order.getShippingCost() is not empty %}
                <p><span>Frais de livraison</span> {{ order.getShippingCost()|format_currency('EUR') }}</p>
            {% endif %}
            <p><span>Prix HT</span> {{ order.getTotalPriceHT()|format_currency('EUR') }}</p>
            <p><span>Taxe</span> {{ order.getTax() }} %</p>
            <p><span>Prix TTC</span> {{ (order.getTotalPriceHT() + (order.getTotalPriceHT() * order.getTax() / 100))|format_currency('EUR') }}</p>
            <p><span>Adresse de livraison</span> {{ order.getStreet() is not empty ? order.getStreet() ~ "," }} {{ order.getZipCode() }} {{ order.getCity() }}</p>
            <p><span>État de votre commande</span></p>
            <div class="order_states">
                {% for orderState in orderStates %}
                    <p><span>- {{ orderState.getName() }}</span>
                        {%- if order.getOrderRanks()[loop.index0].getOrderState().getId() is defined -%}
                            Le {{ order.getOrderRanks()[loop.index0].getDateTime()|format_date(locale="fr", pattern="EEEE d MMMM y 'à' HH:mm") }}
                        {%- else -%}
                            Prochainement...
                        {%- endif -%}
                    </p>
                {% endfor %}
            </div>
        </div>
        <div class="product_cards">
            {% for detail in order.getOrderDetail() %}
                {% include 'client/product_card.html.twig' with {
                                                            'product': detail.getProduct(),
                                                            'quantity': detail.getQuantity(),
                                                            'orderDetail': true,
                                                            'orderPrice': detail.getUnitPrice()
                } %}
            {% endfor %}
        </div>
	</div>
{% endblock %}
